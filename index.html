<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>–ë–ï–ó –î–¢–ü 76 | –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –∫–∞—Ä—Ç–∞</title>
    
    <!-- üìä –Ø–ù–î–ï–ö–° –ú–ï–¢–†–ò–ö–ê -->
    <script type="text/javascript">
       (function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};
       m[i].l=1*new Date();
       for (var j = 0; j < document.scripts.length; j++) {if (document.scripts[j].src === r) { return; }}
       k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})
       (window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");
       ym(106957722, "init", { clickmap:true, trackLinks:true, accurateTrackBounce:true, webvisor:true });
    </script>

    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" crossorigin=""/>
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" crossorigin=""></script>
    <script src="https://cdn.tailwindcss.com"></script>
    
    <style>
        body { margin: 0; padding: 0; background-color: #f3f4f6; font-family: sans-serif; overflow: hidden; }
        #map { height: 100vh; width: 100vw; z-index: 1; }
        
        /* –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≤—Å–ø–ª—ã–≤–∞—é—â–µ–≥–æ –æ–∫–Ω–∞ Leaflet */
        .leaflet-popup-content-wrapper { padding: 0; overflow: hidden; border-radius: 1rem; box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.2); }
        .leaflet-popup-content { margin: 0 !important; } 
        
        /* –û–∫–Ω–æ –Ω–µ –±–æ–ª—å—à–µ 55% –≤—ã—Å–æ—Ç—ã —ç–∫—Ä–∞–Ω–∞ + —Å–∫—Ä–æ–ª–ª –≤–Ω—É—Ç—Ä–∏ (—á—Ç–æ–±—ã –Ω–µ –ø–µ—Ä–µ–∫—Ä—ã–≤–∞–ª–æ –∫–∞—Ä—Ç—É –Ω–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–µ) */
        .popup-scrollable { max-height: 55vh; overflow-y: auto; overflow-x: hidden; }
        .popup-scrollable::-webkit-scrollbar { width: 4px; }
        .popup-scrollable::-webkit-scrollbar-thumb { background: #94a3b8; border-radius: 4px; }
        
        .leaflet-container a.leaflet-popup-close-button { color: white !important; top: 12px !important; right: 12px !important; z-index: 100; text-shadow: 0 1px 3px rgba(0,0,0,0.8); font-size: 20px !important; }
        
        .video-container { position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden; background-color: #000; }
        .video-container iframe { position: absolute; top: 0; left: 0; width: 100%; height: 100%; border: 0; }
        
        .brand-icon, .instructor-icon { background: none; border: none; }
        .icon-wrapper { transition: transform 0.2s; }
        .icon-wrapper:hover { transform: scale(1.1); }
        
        /* –°–¥–≤–∏–≥–∞–µ–º —Å–ª–æ–∏ –≤–Ω–∏–∑ –Ω–∞ –º–æ–±–∏–ª–∫–∞—Ö, —á—Ç–æ–±—ã –Ω–µ –ø–µ—Ä–µ–∫—Ä—ã–≤–∞–ª–∏ –ª–æ–≥–æ—Ç–∏–ø */
        .leaflet-control-layers { border-radius: 12px; padding: 5px; box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1); border: none !important; }
        .leaflet-control-layers-list { font-family: sans-serif; font-size: 14px; }
        @media (max-width: 640px) {
            .leaflet-control-layers { margin-top: 75px !important; }
        }
    </style>
</head>
<body>

    <!-- –ö–æ–º–ø–∞–∫—Ç–Ω—ã–π –ª–æ–≥–æ—Ç–∏–ø -->
    <div class="absolute top-4 left-4 z-[1000] bg-white rounded-xl shadow-lg p-2.5 sm:p-3 flex items-center gap-2 sm:gap-3 border-l-4 border-blue-600 max-w-[200px] sm:max-w-none">
        <div class="bg-blue-100 p-1.5 sm:p-2 rounded-lg text-blue-600 font-bold text-base sm:text-xl">76</div>
        <div>
            <h1 class="font-extrabold text-gray-800 leading-tight uppercase text-sm sm:text-base">–ë–ï–ó –î–¢–ü</h1>
            <p class="text-[8px] sm:text-xs text-gray-500 font-medium uppercase tracking-widest mt-0.5">–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –∫–∞—Ä—Ç–∞</p>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è –≤–∏–¥–µ–æ –Ω–∞ –≤–µ—Å—å —ç–∫—Ä–∞–Ω (–†–µ—à–∞–µ—Ç –ø—Ä–æ–±–ª–µ–º—É —Å –ø–ª–µ–µ—Ä–æ–º) -->
    <div id="videoModal" class="hidden fixed inset-0 z-[9999] bg-black/95 flex flex-col justify-center items-center">
        <button onclick="closeFullscreen()" class="absolute top-4 right-4 text-white text-4xl w-12 h-12 bg-gray-800/50 rounded-full flex justify-center items-center focus:outline-none">&times;</button>
        <div class="w-full max-w-5xl px-0 sm:px-4">
            <div class="relative w-full shadow-2xl" style="padding-bottom: 56.25%;">
                <div id="modalVideoContent" class="absolute inset-0 w-full h-full"></div>
            </div>
        </div>
    </div>

    <div id="map"></div>

    <script>
        // =========================================================================
        // üóÑÔ∏è –ë–ê–ó–ê –î–ê–ù–ù–´–• (–¢–≤–æ—è –∑–æ–Ω–∞)
        // =========================================================================

        const videoPointsData = [
            {
                lat: 57.5871, 
                lng: 39.8515,
                title: "–†–∞–∑–±–æ—Ä –ø–µ—Ä–µ–∫—Ä–µ—Å—Ç–∫–∞ —É –ê—Ä–µ–Ω—ã",
                description: "–ü–æ—Å–º–æ—Ç—Ä–∏ —ç—Ç–æ—Ç –∫–æ—Ä–æ—Ç–∫–∏–π –≤–∏–¥–µ–æ-—Ä–∞–∑–±–æ—Ä, —á—Ç–æ–±—ã —É–≤–µ—Ä–µ–Ω–Ω–æ –ø—Ä–æ–µ—Ö–∞—Ç—å –ø–µ—Ä–µ–∫—Ä–µ—Å—Ç–æ–∫ –∏ –Ω–µ –∑–∞–≤–∞–ª–∏—Ç—å —ç–∫–∑–∞–º–µ–Ω!",
                telegramLink: "https://t.me/bez_dtp",
                vkCode: `<iframe src="https://vkvideo.ru/video_ext.php?oid=-236190441&id=456239017&hash=8e2ed08c09146173&hd=3" allow="autoplay; encrypted-media; fullscreen; picture-in-picture;" allowfullscreen></iframe>`
            },
            {
                lat: 57.58718, 
                lng: 39.85072,
                title: "–†–∞–∑–±–æ—Ä –æ—Ç –ï–≤–≥–µ–Ω–∏—è –ß–µ—Ä–Ω—ã—à–µ–≤–∞",
                description: "–í–Ω–∏–º–∞–Ω–∏–µ –Ω–∞ –ø—Ä–∞–≤—ã–π —Ä—è–¥! –¢–∏–ø–∏—á–Ω–∞—è –ª–æ–≤—É—à–∫–∞ –¥–ª—è –Ω–æ–≤–∏—á–∫–æ–≤.",
                telegramLink: "https://t.me/evg_chernyshev",
                authorName: "–ï–≤–≥–µ–Ω–∏–π –ß–µ—Ä–Ω—ã—à–µ–≤",
                authorPhone: "9080367929",
                authorPrice: "1500 —Ä—É–± / 1.5 —á–∞—Å–∞",
                vkCode: `<iframe src="https://vkvideo.ru/video_ext.php?oid=-236190441&id=456239017&hash=8e2ed08c09146173&hd=3" allow="autoplay; encrypted-media; fullscreen; picture-in-picture;" allowfullscreen></iframe>`
            }
        ];

        const routeLinesData = [
            {
                title: "–£–ª–∏—Ü–∞ –ì–∞–≥–∞—Ä–∏–Ω–∞",
                description: "–ü—Ä–æ–µ–∑–¥ –≤—Å–µ–π —É–ª–∏—Ü—ã –æ—Ç —Å–≤–µ—Ç–æ—Ñ–æ—Ä–∞ –¥–æ –∫–æ–ª—å—Ü–∞. –û–±—Ä–∞—Ç–∏ –≤–Ω–∏–º–∞–Ω–∏–µ –Ω–∞ –∑–Ω–∞–∫–∏ –æ—Å—Ç–∞–Ω–æ–≤–∫–∏!",
                vkCode: `<iframe src="https://vkvideo.ru/video_ext.php?oid=-236190441&id=456239017&hash=8e2ed08c09146173&hd=3" allow="autoplay; encrypted-media; fullscreen; picture-in-picture;" allowfullscreen></iframe>`,
                coordinates: [
                    [57.58910, 39.84850], [57.58860, 39.84960], [57.58810, 39.85050],
                    [57.58750, 39.85170], [57.58680, 39.85300], [57.58610, 39.85450]
                ]
            }
        ];

        const instructorsData = [
            {
                lat: 57.5855, 
                lng: 39.8500,
                name: "–ò–≤–∞–Ω –ü–µ—Ç—Ä–æ–≤",
                car: "Hyundai Solaris (–ú–ö–ü–ü)",
                phone: "+7 (999) 123-45-67",
                description: "–ù–∞—É—á—É –≤–æ–¥–∏—Ç—å –±–µ–∑ —Å—Ç—Ä–µ—Å—Å–∞ –∏ –ø–∞–Ω–∏–∫–∏! –†–∞–∑–±–∏—Ä–∞–µ–º —Å–ª–æ–∂–Ω—ã–µ –º–∞—Ä—à—Ä—É—Ç—ã –Ø—Ä–æ—Å–ª–∞–≤–ª—è.",
                telegramLink: "https://t.me/bez_dtp",
                photoUrl: "https://images.unsplash.com/photo-1560250097-0b93528c311a?q=80&w=100&auto=format&fit=crop",
                rating: "4.9",
                reviewsCount: 48,
                reviewsLink: "https://t.me/bez_dtp"
            }
        ];

        // =========================================================================
        // ‚öôÔ∏è –õ–û–ì–ò–ö–ê –ü–û–õ–ù–û–≠–ö–†–ê–ù–ù–û–ì–û –í–ò–î–ï–û
        // =========================================================================
        function openFullscreen(index, arrayName) {
            let code = '';
            if (arrayName === 'videoPoints') code = videoPointsData[index].vkCode;
            if (arrayName === 'routeLines') code = routeLinesData[index].vkCode;
            
            const container = document.getElementById('modalVideoContent');
            container.innerHTML = code;
            
            const iframe = container.querySelector('iframe');
            if (iframe) {
                iframe.style.width = '100%';
                iframe.style.height = '100%';
                iframe.style.position = 'absolute';
                iframe.style.top = '0';
                iframe.style.left = '0';
            }
            
            document.getElementById('videoModal').classList.remove('hidden');
        }

        function closeFullscreen() {
            document.getElementById('modalVideoContent').innerHTML = ''; 
            document.getElementById('videoModal').classList.add('hidden');
        }

        // =========================================================================
        // ‚öôÔ∏è –î–í–ò–ñ–û–ö –ö–ê–†–¢–´
        // =========================================================================
        
        const streetLayer = L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', { maxZoom: 19, attribution: '¬© OpenStreetMap' });
        const satelliteLayer = L.tileLayer('https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}', { maxZoom: 19, attribution: 'Tiles &copy; Esri' });

        const map = L.map('map', { 
            center: [57.5871, 39.8515], 
            zoom: 16, 
            layers: [streetLayer],
            zoomControl: false 
        });
        
        map.attributionControl.setPrefix('');
        L.control.zoom({ position: 'bottomright' }).addTo(map);

        const videoMarkersGroup = L.layerGroup().addTo(map);
        const routeLinesGroup = L.layerGroup().addTo(map);
        const instructorsGroup = L.layerGroup().addTo(map);

        // –í–µ—Ä–Ω—É–ª–∏ —Ç–≤–æ–∏ –Ω–∞–∑–≤–∞–Ω–∏—è!
        L.control.layers(
            { "üó∫Ô∏è –ö–∞—Ä—Ç–∞ —É–ª–∏—Ü": streetLayer, "üõ∞Ô∏è –°–ø—É—Ç–Ω–∏–∫": satelliteLayer }, 
            { "üé¨ –í–∏–¥–µ–æ-—Ä–∞–∑–±–æ—Ä—ã": videoMarkersGroup, "üõ£Ô∏è –ú–∞—Ä—à—Ä—É—Ç—ã": routeLinesGroup, "üë®‚Äçüè´ –ò–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä—ã": instructorsGroup }, 
            { collapsed: false, position: 'topright' }
        ).addTo(map);

        const customIcon = L.divIcon({
            className: 'brand-icon',
            html: `<div class="icon-wrapper w-12 h-12 bg-blue-600 rounded-full border-4 border-white shadow-xl flex items-center justify-center text-white text-xl">‚ñ∂Ô∏è</div>`,
            iconSize: [48, 48], iconAnchor: [24, 24], popupAnchor: [0, -20]
        });

        // –í–µ—Ä–Ω—É–ª–∏ —Å–ª–æ–≤–æ –ò–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä!
        const instructorIcon = L.divIcon({
            className: 'instructor-icon',
            html: `
                <div class="icon-container w-10 h-10 bg-orange-500 rounded-full border-2 border-white shadow-lg flex items-center justify-center text-xl">üë®‚Äçüè´</div>
                <div class="text-xs font-bold text-center mt-1 text-gray-800 bg-white/90 rounded px-1 shadow-sm">–ò–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä</div>
            `,
            iconSize: [40, 60], iconAnchor: [20, 30], popupAnchor: [0, -30]
        });

        // –û–¢–†–ò–°–û–í–ö–ê –í–ò–î–ï–û
        videoPointsData.forEach((point, index) => {
            let authorBlock = "";
            if (point.authorName) {
                authorBlock = `
                    <div class="mt-3 p-3 bg-gray-50 border border-gray-100 rounded-lg">
                        <p class="text-[10px] font-bold text-gray-400 uppercase mb-1">–†–∞–∑–±–æ—Ä –ø–æ–¥–≥–æ—Ç–æ–≤–∏–ª:</p>
                        <p class="text-sm font-bold text-gray-800">${point.authorName}</p>
                        ${point.authorPrice ? `<p class="text-xs text-indigo-600 font-medium">${point.authorPrice}</p>` : ''}
                        ${point.authorPhone ? `<a href="tel:${point.authorPhone}" class="mt-2 block w-full bg-green-500 text-white text-center py-1.5 rounded-md text-xs font-bold shadow-sm">üìû –ü–æ–∑–≤–æ–Ω–∏—Ç—å –∏–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä—É</a>` : ''}
                    </div>
                `;
            }

            // –¢–ê –°–ê–ú–ê–Ø –ö–ù–û–ü–ö–ê –ü–û–õ–ù–û–≠–ö–†–ê–ù–ù–û–ì–û –í–ò–î–ï–û
            let fullScreenBtn = point.vkCode ? `<button onclick="openFullscreen(${index}, 'videoPoints')" class="w-full bg-gray-800 text-white py-2 text-xs font-bold uppercase flex justify-center items-center shadow-md active:bg-gray-700">üé¶ –ù–∞ –≤–µ—Å—å —ç–∫—Ä–∞–Ω</button>` : "";

            const popup = `
                <div class="popup-scrollable bg-white flex flex-col">
                    <div class="bg-gradient-to-r from-blue-700 to-blue-500 p-4 pb-4">
                        <span class="bg-blue-900 text-blue-100 text-[10px] font-bold px-2 py-1 rounded uppercase tracking-wide">–°–µ–∫—Ä–µ—Ç –∏–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–∞</span>
                        <h3 class="font-bold text-white text-lg mt-2 leading-tight">${point.title}</h3>
                    </div>
                    ${point.vkCode ? `<div class="video-container shadow-inner bg-black">${point.vkCode}</div>` : ''}
                    ${fullScreenBtn}
                    <div class="p-4 flex flex-col gap-2">
                        ${point.description ? `<p class="text-sm text-gray-700 leading-relaxed">${point.description}</p>` : ''}
                        ${authorBlock}
                        ${point.telegramLink ? `
                        <a href="${point.telegramLink}" target="_blank" class="w-full flex justify-center items-center gap-2 bg-[#2AABEE] hover:bg-[#229ED9] text-white py-2.5 rounded-lg text-sm font-semibold transition shadow-md mt-1">
                            –û–±—Å—É–¥–∏—Ç—å –≤ –∑–∞–∫—Ä—ã—Ç–æ–π –≥—Ä—É–ø–ø–µ
                        </a>` : ''}
                    </div>
                </div>`;
            
            L.marker([point.lat, point.lng], {icon: customIcon}).bindPopup(popup, { maxWidth: 340, minWidth: 280 }).addTo(videoMarkersGroup);
        });

        // –û–¢–†–ò–°–û–í–ö–ê –ú–ê–†–®–†–£–¢–û–í
        routeLinesData.forEach((route, index) => {
            const routeLine = L.polyline(route.coordinates, { color: '#10B981', weight: 8, opacity: 0.8, lineJoin: 'round' });
            
            // –¢–ê –°–ê–ú–ê–Ø –ö–ù–û–ü–ö–ê –ü–û–õ–ù–û–≠–ö–†–ê–ù–ù–û–ì–û –í–ò–î–ï–û
            let fullScreenBtn = route.vkCode ? `<button onclick="openFullscreen(${index}, 'routeLines')" class="w-full bg-gray-800 text-white py-2 text-xs font-bold uppercase flex justify-center items-center shadow-md active:bg-gray-700">üé¶ –ù–∞ –≤–µ—Å—å —ç–∫—Ä–∞–Ω</button>` : "";

            const popup = `
                <div class="popup-scrollable bg-white flex flex-col">
                    <div class="bg-gradient-to-r from-emerald-600 to-emerald-400 p-4 pb-4">
                        <span class="bg-emerald-900 text-emerald-100 text-[10px] font-bold px-2 py-1 rounded uppercase tracking-wide">–ü—Ä–æ–µ–∑–¥ —É—á–∞—Å—Ç–∫–∞</span>
                        <h3 class="font-bold text-white text-lg mt-2 leading-tight">${route.title}</h3>
                    </div>
                    ${route.vkCode ? `<div class="video-container shadow-inner bg-black">${route.vkCode}</div>` : ''}
                    ${fullScreenBtn}
                    <div class="p-4 flex flex-col gap-3">
                        <p class="text-sm text-gray-700 leading-relaxed">${route.description}</p>
                    </div>
                </div>`;
            routeLine.bindPopup(popup, { maxWidth: 340, minWidth: 280 });
            routeLinesGroup.addLayer(routeLine);
        });

        // –û–¢–†–ò–°–û–í–ö–ê –ò–ù–°–¢–†–£–ö–¢–û–†–û–í
        instructorsData.forEach(inst => {
            const ratingHtml = inst.rating 
                ? `‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê ${inst.rating} (${inst.reviewsCount} –æ—Ç–∑—ã–≤–æ–≤)` 
                : '‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê (–ù–æ–≤—ã–π –∏–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä)';

            const popup = `
                <div class="popup-scrollable bg-white flex flex-col">
                    <div class="bg-gradient-to-r from-orange-400 to-red-500 p-4 flex gap-3 items-center">
                        <img src="${inst.photoUrl}" class="w-14 h-14 rounded-full border-2 border-white shadow-sm object-cover" alt="${inst.name}">
                        <div class="text-white">
                            <h3 class="font-bold text-lg leading-tight">${inst.name}</h3>
                            <p class="text-orange-100 text-xs">${inst.car}</p>
                            <div class="text-yellow-300 text-xs mt-1 font-medium">${ratingHtml}</div>
                        </div>
                    </div>
                    <div class="p-4 flex flex-col gap-3">
                        ${inst.description ? `<p class="text-sm text-gray-700 italic">"${inst.description}"</p>` : ''}
                        
                        <div class="flex gap-2 mt-1">
                            ${inst.phone ? `<a href="tel:${inst.phone}" class="flex-1 bg-green-500 text-white text-center py-2.5 rounded-lg text-sm font-medium hover:bg-green-600 transition shadow">üìû –ó–≤–æ–Ω–æ–∫</a>` : ''}
                            ${inst.telegramLink ? `<a href="${inst.telegramLink}" target="_blank" class="flex-1 bg-[#2AABEE] text-white text-center py-2.5 rounded-lg text-sm font-medium hover:bg-[#229ED9] transition shadow">üí¨ Telegram</a>` : ''}
                        </div>
                        
                        <div class="mt-2 pt-3 border-t border-gray-100 flex justify-between items-center">
                            <span class="text-xs text-gray-500">–£—á–∏–ª–∏—Å—å —É –∏–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–∞?</span>
                            <a href="${inst.reviewsLink || '#'}" target="_blank" class="text-xs font-semibold text-blue-600 hover:text-blue-800 transition flex items-center gap-1">
                                üìù –ß–∏—Ç–∞—Ç—å –æ—Ç–∑—ã–≤—ã
                            </a>
                        </div>
                    </div>
                </div>`;
            L.marker([inst.lat, inst.lng], {icon: instructorIcon}).bindPopup(popup, { maxWidth: 340, minWidth: 280 }).addTo(instructorsGroup);
        });

    </script>
</body>
</html>
