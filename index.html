<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>–ë–ï–ó –î–¢–ü 76 | –ö–∞—Ä—Ç–∞</title>
    
    <!-- üìä –Ø–ù–î–ï–ö–° –ú–ï–¢–†–ò–ö–ê -->
    <script type="text/javascript">
       (function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};
       m[i].l=1*new Date();
       for (var j = 0; j < document.scripts.length; j++) {if (document.scripts[j].src === r) { return; }}
       k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})
       (window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");
       ym(106957722, "init", { clickmap:true, trackLinks:true, accurateTrackBounce:true, webvisor:true });
    </script>

    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" crossorigin=""/>
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" crossorigin=""></script>
    <script src="https://cdn.tailwindcss.com"></script>
    
    <style>
        body { margin: 0; padding: 0; background-color: #f3f4f6; overflow: hidden; font-family: sans-serif; }
        #map { height: 100vh; width: 100vw; z-index: 1; }
        
        .video-container { position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden; background-color: #000; border-radius: 8px; }
        .video-container iframe { position: absolute; top: 0; left: 0; width: 100%; height: 100%; border: 0; }
        
        .brand-icon, .instructor-icon, .sign-icon { background: none; border: none; }
        .leaflet-control-layers { border-radius: 12px; box-shadow: 0 4px 10px rgba(0,0,0,0.15) !important; border: none !important; margin: 12px !important;}
        
        .leaflet-popup { display: none !important; }

        .custom-tooltip { background-color: rgba(255, 255, 255, 0.95); border: none; border-radius: 8px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); font-weight: bold; color: #1f2937; font-size: 11px; padding: 4px 8px; z-index: 1000; }
        .leaflet-tooltip-top:before { border-top-color: rgba(255, 255, 255, 0.95); }

        ::-webkit-scrollbar { width: 4px; }
        ::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 4px; }
    </style>
</head>
<body>

    <div class="absolute top-3 left-3 z-[1000] bg-white/95 backdrop-blur-md rounded-2xl shadow-lg flex items-center border-l-4 border-blue-600 overflow-hidden transition-all duration-300 pointer-events-auto">
        <div class="bg-blue-100 px-3 py-2 text-blue-700 font-black text-xl leading-none italic">76</div>
        <div class="px-4 py-2 hidden sm:flex flex-col">
            <h1 class="font-black text-gray-900 uppercase leading-none text-lg italic">–ë–ï–ó –î–¢–ü</h1>
            <p class="text-[9px] text-gray-500 font-bold uppercase leading-none mt-1 tracking-widest">–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –∫–∞—Ä—Ç–∞</p>
        </div>
    </div>

    <div class="absolute top-[80px] left-3 z-[1000] pointer-events-auto">
        <button onclick="openMenu()" class="bg-white/95 backdrop-blur-md text-gray-800 px-4 py-2 rounded-xl shadow-[0_4px_10px_rgba(0,0,0,0.15)] font-bold text-xs uppercase tracking-wider flex items-center gap-2 border border-gray-100 hover:bg-gray-50 transition">
            üìã –°–ø–∏—Å–æ–∫
        </button>
    </div>

    <div id="navMenu" class="fixed inset-y-0 right-0 z-[4000] w-full sm:w-80 bg-white shadow-2xl transform translate-x-full transition-transform duration-300 ease-in-out flex flex-col">
        <div class="bg-blue-600 p-4 flex justify-between items-center shrink-0">
            <h2 class="text-white font-black text-sm uppercase tracking-widest">üìç –î–æ—Å—Ç—É–ø–Ω—ã–µ —Ä–∞–∑–±–æ—Ä—ã</h2>
            <button onclick="closeMenu()" class="text-white hover:text-gray-200 text-3xl leading-none focus:outline-none">&times;</button>
        </div>
        <div class="overflow-y-auto p-4 flex-grow bg-gray-50" id="menuContent">
            <!-- –°—é–¥–∞ –≤—Å—Ç–∞–≤–∏—Ç—Å—è –º–µ–Ω—é -->
        </div>
    </div>

    <div id="bottomSheet" class="fixed inset-x-0 bottom-0 z-[2000] bg-white rounded-t-3xl shadow-[0_-10px_40px_rgba(0,0,0,0.2)] transform translate-y-full transition-transform duration-300 ease-out flex flex-col max-h-[75vh] sm:max-w-md sm:mx-auto sm:mb-4 sm:rounded-3xl sm:inset-x-4">
        <div class="w-full flex justify-center pt-3 pb-2 cursor-pointer shrink-0 relative" onclick="closeSheet()">
            <div class="w-12 h-1.5 bg-gray-300 rounded-full"></div>
            <button onclick="closeSheet()" class="absolute top-2 right-4 w-8 h-8 bg-gray-100 rounded-full flex items-center justify-center text-gray-600 font-bold text-lg hover:bg-gray-200">&times;</button>
        </div>
        <div id="sheetContent" class="overflow-y-auto pb-8 px-5">
            <!-- –°—é–¥–∞ –≤—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è –∫–∞—Ä—Ç–æ—á–∫–∞ -->
        </div>
    </div>

    <div id="videoModal" class="fixed inset-0 z-[3000] bg-black hidden flex-col justify-center items-center">
        <button onclick="closeFullscreen()" class="absolute top-6 right-6 text-white text-3xl w-12 h-12 bg-white/20 backdrop-blur-md rounded-full flex justify-center items-center focus:outline-none shadow-lg z-50">&times;</button>
        <div class="w-full max-w-5xl">
            <div id="modalVideoContent" class="relative w-full shadow-2xl" style="padding-bottom: 56.25%;">
                <!-- –°—é–¥–∞ –≤—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è iframe -->
            </div>
        </div>
    </div>

    <div id="map"></div>

    <script>
        // =========================================================================
        // üóÑÔ∏è –ë–ê–ó–ê –î–ê–ù–ù–´–•
        // =========================================================================
        
        const videoPointsData = [
            {
                lat: 57.5871, lng: 39.8515,
                title: "–†–∞–∑–±–æ—Ä –ø–µ—Ä–µ–∫—Ä–µ—Å—Ç–∫–∞ —É –ê—Ä–µ–Ω—ã",
                description: "–ü–æ—Å–º–æ—Ç—Ä–∏ —ç—Ç–æ—Ç –∫–æ—Ä–æ—Ç–∫–∏–π –≤–∏–¥–µ–æ-—Ä–∞–∑–±–æ—Ä, —á—Ç–æ–±—ã —É–≤–µ—Ä–µ–Ω–Ω–æ –ø—Ä–æ–µ—Ö–∞—Ç—å –ø–µ—Ä–µ–∫—Ä–µ—Å—Ç–æ–∫ –∏ –Ω–µ –∑–∞–≤–∞–ª–∏—Ç—å —ç–∫–∑–∞–º–µ–Ω!",
                telegramLink: "https://t.me/bez_dtp",
                vkCode: `<iframe src="https://vkvideo.ru/video_ext.php?oid=-236190441&id=456239017&hash=8e2ed08c09146173&hd=3" allow="autoplay; encrypted-media; fullscreen; picture-in-picture;" allowfullscreen></iframe>`
            },
            {
                lat: 57.58718, lng: 39.85072,
                title: "–†–∞–∑–±–æ—Ä –æ—Ç –ï–≤–≥–µ–Ω–∏—è –ß–µ—Ä–Ω—ã—à–µ–≤–∞",
                description: "–í–Ω–∏–º–∞–Ω–∏–µ –Ω–∞ –ø—Ä–∞–≤—ã–π —Ä—è–¥! –¢–∏–ø–∏—á–Ω–∞—è –ª–æ–≤—É—à–∫–∞ –¥–ª—è –Ω–æ–≤–∏—á–∫–æ–≤ –Ω–∞ —ç—Ç–æ–º —É—á–∞—Å—Ç–∫–µ.",
                telegramLink: "https://t.me/evg_chernyshev",
                authorName: "–ï–≤–≥–µ–Ω–∏–π –ß–µ—Ä–Ω—ã—à–µ–≤",
                authorPhone: "9080367929",
                authorPrice: "1500 —Ä—É–± / 1.5 —á–∞—Å–∞",
                vkCode: `<iframe src="https://vkvideo.ru/video_ext.php?oid=-236190441&id=456239017&hash=8e2ed08c09146173&hd=3" allow="autoplay; encrypted-media; fullscreen; picture-in-picture;" allowfullscreen></iframe>`
            }
        ];

        const streetPointsData = [
            { lat: 57.59012, lng: 39.85937, title: "—É–ª–∏—Ü–∞ –ì–∞–≥–∞—Ä–∏–Ω–∞", description: "—É–ª. –ì–∞–≥–∞—Ä–∏–Ω–∞ –æ—Ç –ú–æ—Å–∫–æ–≤—Å–∫–æ–≥–æ –ø—Ä–æ—Å–ø–µ–∫—Ç–∞ –¥–æ —É–ª. –ù–µ—Ñ—Ç—è–Ω–∏–∫–æ–≤", telegramLink: "", authorName: "", authorPhone: "", authorPrice: "0", vkCode: `<iframe src="https://vkvideo.ru/video_ext.php?oid=-236190441&id=456239018&hash=0783681156dd1f26&hd=3" allow="autoplay; encrypted-media; fullscreen; picture-in-picture;" allowfullscreen></iframe>` },
            { lat: 57.58481, lng: 39.83561, title: "—É–ª–∏—Ü–∞ –ú–µ–Ω–¥–µ–ª–µ–µ–≤–∞", description: "–æ—Ç —É–ª. –¢–∏—Ç–æ–≤–∞ –¥–æ —É–ª. –ö—É—Ä—á–∞—Ç–æ–≤–∞", telegramLink: "", authorName: "", authorPhone: "", authorPrice: "0", vkCode: `<iframe src="https://vkvideo.ru/video_ext.php?oid=-236190441&id=456239021&hash=2c0ea19bd41c438f&hd=3" width="1280" height="720" allow="autoplay; encrypted-media; fullscreen; picture-in-picture; screen-wake-lock;" frameborder="0" allowfullscreen></iframe>` },
            { lat: 57.58150, lng: 39.85189, title: "—É–ª–∏—Ü–∞ –ü–∞–≤–ª–æ–≤–∞", description: "—É–ª. –ü–∞–≤–ª–æ–≤–∞ –æ—Ç –ú–æ—Å–∫–æ–≤—Å–∫–æ–≥–æ –ø—Ä–æ—Å–ø–µ–∫—Ç–∞ –∏ –æ–±—Ä–∞—Ç–Ω–æ", telegramLink: "", authorName: "", authorPhone: "", authorPrice: "0", vkCode: `<iframe src="https://vkvideo.ru/video_ext.php?oid=-236190441&id=456239020&hash=139d4be0f98d6870&hd=3" width="1280" height="720" allow="autoplay; encrypted-media; fullscreen; picture-in-picture; screen-wake-lock;" frameborder="0" allowfullscreen></iframe>` },
            { lat: 57.58063, lng: 39.83475, title: "—É–ª–∏—Ü–∞ –ì–∞–≥–∞—Ä–∏–Ω–∞", description: "—É–ª. –ì–∞–≥–∞—Ä–∏–Ω–∞ –æ—Ç —É–ª. –ù–µ—Ñ—Ç—è–Ω–∏–∫–æ–≤", telegramLink: "", authorName: "", authorPhone: "", authorPrice: "0", vkCode: `<iframe src="https://vkvideo.ru/video_ext.php?oid=-236190441&id=456239019&hash=577b062e3ec1bd18&hd=3" width="1280" height="720" allow="autoplay; encrypted-media; fullscreen; picture-in-picture; screen-wake-lock;" frameborder="0" allowfullscreen></iframe>` },
            { lat: 57.58062, lng: 39.83484, title: "—É–ª–∏—Ü–∞ –ù–µ—Ñ—Ç—è–Ω–∏–∫–æ–≤", description: "–æ—Ç —É–ª. –ì–∞–≥–∞—Ä–∏–Ω–∞ –¥–æ –ú–æ—Å–∫–æ–≤—Å–∫–æ–≥–æ –ø—Ä–æ—Å–ø–µ–∫—Ç–∞", telegramLink: "", authorName: "", authorPhone: "", authorPrice: "0", vkCode: `<iframe src="https://vkvideo.ru/video_ext.php?oid=-236190441&id=456239029&hash=fc76b1ebf8a304e1&hd=3" width="1280" height="720" allow="autoplay; encrypted-media; fullscreen; picture-in-picture; screen-wake-lock;" frameborder="0" allowfullscreen></iframe>` },
            { lat: 57.57651, lng: 39.84514, title: "—É–ª–∏—Ü–∞ –ù–µ—Ñ—Ç—è–Ω–∏–∫–æ–≤", description: "–æ—Ç –ú–æ—Å–∫–æ–≤—Å–∫–æ–≥–æ –ø—Ä–æ—Å–ø–µ–∫—Ç–∞ –¥–æ —É–ª. –ì–∞–≥–∞—Ä–∏–Ω–∞", telegramLink: "", authorName: "", authorPhone: "", authorPrice: "0", vkCode: `<iframe src="https://vkvideo.ru/video_ext.php?oid=-236190441&id=456239028&hash=0c72141f6e801cb6&hd=3" width="1280" height="720" allow="autoplay; encrypted-media; fullscreen; picture-in-picture; screen-wake-lock;" frameborder="0" allowfullscreen></iframe>` },
            { lat: 57.58683, lng: 39.83844, title: "—É–ª–∏—Ü–∞ –¢–∏—Ç–æ–≤–∞", description: "–æ—Ç —É–ª. –ü–∞–≤–ª–æ–≤–∞ –¥–æ —É–ª. –†—ã–∫–∞—á–µ–≤–∞", telegramLink: "", authorName: "", authorPhone: "", authorPrice: "0", vkCode: `<iframe src="https://vkvideo.ru/video_ext.php?oid=-236190441&id=456239027&hash=edd7df047f99efc3&hd=3" width="1280" height="720" allow="autoplay; encrypted-media; fullscreen; picture-in-picture; screen-wake-lock;" frameborder="0" allowfullscreen></iframe>` },
            { lat: 57.58162, lng: 39.83596, title: "—É–ª–∏—Ü–∞ –†—ã–∫–∞—á–µ–≤–∞, –¢–∏—Ç–æ–≤–∞", description: "–æ—Ç —É–ª. –ì–∞–≥–∞—Ä–∏–Ω–∞ –¥–æ  —É–ª. –ü–∞–≤–ª–æ–≤–∞ ", telegramLink: "", authorName: "", authorPhone: "", authorPrice: "0", vkCode: `<iframe src="https://vkvideo.ru/video_ext.php?oid=-236190441&id=456239026&hash=f5fdfc80ffffe7e9&hd=3" width="1280" height="720" allow="autoplay; encrypted-media; fullscreen; picture-in-picture; screen-wake-lock;" frameborder="0" allowfullscreen></iframe>` },
            { lat: 57.58268, lng: 39.83298, title: "—É–ª–∏—Ü–∞ –†—ã–∫–∞—á–µ–≤–∞", description: "–æ—Ç —É–ª. –¢–∏—Ç–æ–≤–∞ –¥–æ  —É–ª. –ö—É—Ä—á–∞—Ç–æ–≤–∞", telegramLink: "", authorName: "", authorPhone: "", authorPrice: "0", vkCode: `<iframe src="https://vkvideo.ru/video_ext.php?oid=-236190441&id=456239022&hash=bfcc6e06b9732cc5&hd=3" width="1280" height="720" allow="autoplay; encrypted-media; fullscreen; picture-in-picture; screen-wake-lock;" frameborder="0" allowfullscreen></iframe>` },
            { lat: 57.58263, lng: 39.84903, title: "—É–ª–∏—Ü–∞ –ö—É—Ä—á–∞—Ç–æ–≤–∞", description: "–æ—Ç —É–ª. –ü–∞–≤–ª–æ–≤–∞ –¥–æ  —É–ª. –†—ã–∫–∞—á–µ–≤–∞", telegramLink: "", authorName: "", authorPhone: "", authorPrice: "0", vkCode: `<iframe src="https://vkvideo.ru/video_ext.php?oid=-236190441&id=456239024&hash=1ddb1e564ad42f2d&hd=3" width="1280" height="720" allow="autoplay; encrypted-media; fullscreen; picture-in-picture; screen-wake-lock;" frameborder="0" allowfullscreen></iframe>` },
            { lat: 57.57861, lng: 39.84353, title: "—É–ª–∏—Ü–∞ –†—ã–∫–∞—á–µ–≤–∞, –ú–∞–π–æ—Ä–æ–≤–∞", description: "–æ—Ç —É–ª. –ö—É—Ä—á–∞—Ç–æ–≤–∞ –¥–æ  —É–ª. –ú–µ–Ω–¥–µ–ª–µ–µ–≤–∞", telegramLink: "", authorName: "", authorPhone: "", authorPrice: "0", vkCode: `<iframe src="https://vkvideo.ru/video_ext.php?oid=-236190441&id=456239023&hash=26ae89e6ca1fdb7f&hd=3" width="1280" height="720" allow="autoplay; encrypted-media; fullscreen; picture-in-picture; screen-wake-lock;" frameborder="0" allowfullscreen></iframe>` },
            { lat: 57.57862, lng: 39.84344, title: "—É–ª–∏—Ü–∞ –ö—É—Ä—á–∞—Ç–æ–≤–∞", description: "–æ—Ç —É–ª. –†—ã–∫–∞—á–µ–≤–∞ –¥–æ  —É–ª. –ü–∞–≤–ª–æ–≤–∞", telegramLink: "", authorName: "", authorPhone: "", authorPrice: "0", vkCode: `<iframe src="https://vkvideo.ru/video_ext.php?oid=-236190441&id=456239025&hash=a8e5a6380f9b53f1&hd=3" width="1280" height="720" allow="autoplay; encrypted-media; fullscreen; picture-in-picture; screen-wake-lock;" frameborder="0" allowfullscreen></iframe>` }
        ];

        const infoPointsData = [
            {
                lat: 57.5880, lng: 39.8520, 
                title: "–î–æ–∫—É–º–µ–Ω—Ç—ã –¥–ª—è —ç–∫–∑–∞–º–µ–Ω–∞",
                description: "–î–ª—è –¥–æ–ø—É—Å–∫–∞ –∫ —ç–∫–∑–∞–º–µ–Ω—É –≤ –ì–ò–ë–î–î –ø—Ä–∏ —Å–µ–±–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –∏–º–µ—Ç—å –ø–∞—Å–ø–æ—Ä—Ç –∏ –∫–≤–∏—Ç–∞–Ω—Ü–∏—é –æ–± –æ–ø–ª–∞—Ç–µ –≥–æ—Å–ø–æ—à–ª–∏–Ω—ã.",
                imageUrl: "", fileUrl: "", phone: "+7 (4852) 11-22-33" 
            }
        ];

        // üö¶ –ù–û–í–´–ô –ú–ê–°–°–ò–í: –î–û–†–û–ñ–ù–´–ï –ó–ù–ê–ö–ò (–î–æ–±–∞–≤–ª–µ–Ω –∑–Ω–∞–∫ "–£—Å—Ç—É–ø–∏ –¥–æ—Ä–æ–≥—É")
        const signsData = [
            { lat: 57.5891, lng: 39.8485, type: 'no_stop', title: "–û—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–ø—Ä–µ—â–µ–Ω–∞", description: "–ù–∞ —ç—Ç–æ–º —É—á–∞—Å—Ç–∫–µ –ø–∞—Ä–∫–æ–≤–∞—Ç—å—Å—è –Ω–µ–ª—å–∑—è, —Å—Ä–∞–∑—É –Ω–µ—Å–¥–∞—á–∞!" },
            { lat: 57.5880, lng: 39.8500, type: 'speed40', title: "–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ 40 –∫–º/—á", description: "–ó–æ–Ω–∞ –¥–µ–π—Å—Ç–≤–∏—è –∑–Ω–∞–∫–∞ –¥–æ —Å–ª–µ–¥—É—é—â–µ–≥–æ –ø–µ—Ä–µ–∫—Ä–µ—Å—Ç–∫–∞." },
            { lat: 57.5875, lng: 39.8517, type: 'speed20', title: "–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ 20 –∫–º/—á", description: "–í–Ω–∏–º–∞–Ω–∏–µ, –ø–µ—à–µ—Ö–æ–¥–Ω—ã–π –ø–µ—Ä–µ—Ö–æ–¥ —Ä—è–¥–æ–º." },
            { lat: 57.5861, lng: 39.8545, type: 'main_road', title: "–ì–ª–∞–≤–Ω–∞—è –¥–æ—Ä–æ–≥–∞", description: "–£ –Ω–∞—Å –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç –Ω–∞ —ç—Ç–æ–º –ø–µ—Ä–µ–∫—Ä–µ—Å—Ç–∫–µ." },
            { lat: 57.5885, lng: 39.8495, type: 'stop', title: "–î–≤–∏–∂–µ–Ω–∏–µ –±–µ–∑ –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ –∑–∞–ø—Ä–µ—â–µ–Ω–æ", description: "–û–±—è–∑–∞—Ç–µ–ª—å–Ω–∞—è —Ñ–∏–∫—Å–∞—Ü–∏—è –∞–≤—Ç–æ–º–æ–±–∏–ª—è! –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º—Å—è —É —Å—Ç–æ–ø-–ª–∏–Ω–∏–∏ –∏–ª–∏ –∫—Ä–∞—è –ø–µ—Ä–µ—Å–µ–∫–∞–µ–º–æ–π –ø—Ä–æ–µ–∑–∂–µ–π —á–∞—Å—Ç–∏." },
            // –ù–û–í–´–ô –ó–ù–ê–ö "–£–°–¢–£–ü–ò –î–û–†–û–ì–£"
            { lat: 57.5878, lng: 39.8490, type: 'yield', title: "–£—Å—Ç—É–ø–∏ –¥–æ—Ä–æ–≥—É", description: "–í–Ω–∏–º–∞—Ç–µ–ª—å–Ω–æ —Å–º–æ—Ç—Ä–∏–º –ø–æ —Å—Ç–æ—Ä–æ–Ω–∞–º –∏ —É—Å—Ç—É–ø–∞–µ–º –≤—Å–µ–º, –∫—Ç–æ –¥–≤–∏–∂–µ—Ç—Å—è –ø–æ –≥–ª–∞–≤–Ω–æ–π!" }
        ];

        const routeLinesData = [
            {
                title: "–£–ª–∏—Ü–∞ –ì–∞–≥–∞—Ä–∏–Ω–∞",
                description: "–ü—Ä–æ–µ–∑–¥ –≤—Å–µ–π —É–ª–∏—Ü—ã –æ—Ç —Å–≤–µ—Ç–æ—Ñ–æ—Ä–∞ –¥–æ –∫–æ–ª—å—Ü–∞. –û–±—Ä–∞—Ç–∏ –≤–Ω–∏–º–∞–Ω–∏–µ –Ω–∞ –∑–Ω–∞–∫–∏ –æ—Å—Ç–∞–Ω–æ–≤–∫–∏!",
                vkCode: `<iframe src="https://vkvideo.ru/video_ext.php?oid=-236190441&id=456239017&hash=8e2ed08c09146173&hd=3" allow="autoplay; encrypted-media; fullscreen; picture-in-picture;" allowfullscreen></iframe>`,
                coordinates: [[57.58910, 39.84850], [57.58860, 39.84960], [57.58810, 39.85050], [57.58750, 39.85170], [57.58680, 39.85300], [57.58610, 39.85450]]
            },
        ];

        const instructorsData = [
            {
                lat: 57.5855, lng: 39.8500,
                name: "–ò–≤–∞–Ω –ü–µ—Ç—Ä–æ–≤",
                car: "Hyundai Solaris (–ú–ö–ü–ü)",
                phone: "+7 (999) 123-45-67",
                description: "–ù–∞—É—á—É –≤–æ–¥–∏—Ç—å –±–µ–∑ —Å—Ç—Ä–µ—Å—Å–∞ –∏ –ø–∞–Ω–∏–∫–∏! –†–∞–∑–±–∏—Ä–∞–µ–º —Å–ª–æ–∂–Ω—ã–µ –º–∞—Ä—à—Ä—É—Ç—ã –Ø—Ä–æ—Å–ª–∞–≤–ª—è.",
                photoUrl: "https://images.unsplash.com/photo-1560250097-0b93528c311a?q=80&w=100&auto=format&fit=crop",
                rating: "5.0", reviewsCount: 12,
                reviewsLink: "https://t.me/bez_dtp", telegramLink: "https://t.me/bez_dtp"
            }
        ];

        const sheetCache = {};

        // --- –õ–û–ì–ò–ö–ê –ò–ù–¢–ï–†–§–ï–ô–°–ê ---
        function openSheet(htmlContent) {
            document.getElementById('sheetContent').innerHTML = htmlContent;
            document.getElementById('bottomSheet').classList.remove('translate-y-full');
            closeMenu();
        }

        function closeSheet() {
            document.getElementById('bottomSheet').classList.add('translate-y-full');
            setTimeout(() => { document.getElementById('sheetContent').innerHTML = ''; }, 300);
        }

        function openMenu() { document.getElementById('navMenu').classList.remove('translate-x-full'); }
        function closeMenu() { document.getElementById('navMenu').classList.add('translate-x-full'); }

        window.flyToPoint = function(lat, lng, cacheId) {
            closeMenu();
            map.flyTo([lat, lng], 17, { animate: true, duration: 1.5 });
            setTimeout(() => { openSheet(sheetCache[cacheId]); }, 1500);
        };

        function openFullscreen(index, arrayName) {
            let code = '';
            if (arrayName === 'videoPoints') code = videoPointsData[index].vkCode;
            if (arrayName === 'streetPoints') code = streetPointsData[index].vkCode;
            if (arrayName === 'routeLines') code = routeLinesData[index].vkCode;
            
            const container = document.getElementById('modalVideoContent');
            container.innerHTML = code;
            
            const iframe = container.querySelector('iframe');
            if (iframe) {
                iframe.style.position = 'absolute'; iframe.style.top = '0'; iframe.style.left = '0'; iframe.style.width = '100%'; iframe.style.height = '100%';
            }
            
            document.getElementById('bottomSheet').classList.add('translate-y-full');
            document.getElementById('videoModal').classList.remove('hidden');
            document.getElementById('videoModal').classList.add('flex');
        }

        function closeFullscreen() {
            document.getElementById('modalVideoContent').innerHTML = ''; 
            document.getElementById('videoModal').classList.add('hidden');
            document.getElementById('videoModal').classList.remove('flex');
            document.getElementById('bottomSheet').classList.remove('translate-y-full');
        }

        // --- –î–í–ò–ñ–û–ö –ö–ê–†–¢–´ ---
        const streetLayer = L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', { maxZoom: 19 });
        const satelliteLayer = L.tileLayer('https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}', { maxZoom: 19 });

        const map = L.map('map', { center: [57.5871, 39.8515], zoom: 16, layers: [streetLayer], zoomControl: false });
        map.attributionControl.setPrefix(''); 
        L.control.zoom({ position: 'bottomright' }).addTo(map);

        const videoMarkersGroup = L.layerGroup().addTo(map);
        const streetPointsGroup = L.layerGroup().addTo(map);
        const infoPointsGroup = L.layerGroup().addTo(map);
        const signsGroup = L.layerGroup().addTo(map); // –ì—Ä—É–ø–ø–∞ –¥–ª—è –ó–ù–ê–ö–û–í
        const routeLinesGroup = L.layerGroup().addTo(map);
        const instructorsGroup = L.layerGroup().addTo(map);

        L.control.layers(
            { "üó∫Ô∏è –£–ª–∏—Ü—ã": streetLayer, "üõ∞Ô∏è –°–ø—É—Ç–Ω–∏–∫": satelliteLayer }, 
            { "üé¨ –í–∏–¥–µ–æ": videoMarkersGroup, "üìç –†–∞–∑–±–æ—Ä—ã —É–ª–∏—Ü": streetPointsGroup, "üö¶ –ó–Ω–∞–∫–∏": signsGroup, "‚ùóÔ∏è –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è": infoPointsGroup, "üõ£Ô∏è –ú–∞—Ä—à—Ä—É—Ç—ã": routeLinesGroup, "üë®‚Äçüè´ –ò–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä—ã": instructorsGroup }, 
            { collapsed: true, position: 'topright' } 
        ).addTo(map);

        // =========================================================
        // –ò–ö–û–ù–ö–ò (Tailwind CSS Shapes - –í—ã—Å—à–∏–π –ø–∏–ª–æ—Ç–∞–∂!)
        // =========================================================

        const videoIcon = L.divIcon({
            className: 'brand-icon',
            html: `<div class="w-7 h-7 bg-blue-600 rounded-lg border-2 border-white shadow-md flex items-center justify-center text-white text-xs">‚ñ∂Ô∏è</div>`,
            iconSize: [28, 28], iconAnchor: [14, 14]
        });

        const streetIcon = L.divIcon({
            className: 'brand-icon',
            html: `<div class="w-6 h-6 bg-emerald-500 rounded-full border-[1.5px] border-white shadow-sm flex items-center justify-center text-white text-[10px]">üìç</div>`,
            iconSize: [24, 24], iconAnchor: [12, 12]
        });

        const instructorIcon = L.divIcon({
            className: 'instructor-icon',
            html: `<div class="w-8 h-8 bg-orange-500 rounded-full border-2 border-white shadow-md flex items-center justify-center text-sm">üë®‚Äçüè´</div>`,
            iconSize: [32, 32], iconAnchor: [16, 16]
        });

        const infoIcon = L.divIcon({
            className: 'brand-icon',
            html: `<div class="w-8 h-8 bg-purple-600 rounded-full border-2 border-white shadow-md flex items-center justify-center text-white font-bold text-sm">!</div>`,
            iconSize: [32, 32], iconAnchor: [16, 16]
        });

        // –§—É–Ω–∫—Ü–∏—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∏–∫–æ–Ω–æ–∫ –∑–Ω–∞–∫–æ–≤ (–î–æ–±–∞–≤–ª–µ–Ω –£—Å—Ç—É–ø–∏ –¥–æ—Ä–æ–≥—É)
        function getSignIcon(type) {
            let htmlContent = '';
            let iSize = [28, 28]; // –ë–∞–∑–æ–≤—ã–π —Ä–∞–∑–º–µ—Ä –∑–Ω–∞–∫–∞
            let iAnchor = [14, 14];

            const noStopHtml = `<div class="w-7 h-7 bg-blue-700 rounded-full border-[3px] border-red-600 shadow-md relative flex items-center justify-center overflow-hidden z-10"><div class="absolute w-8 h-[3px] bg-red-600 rotate-45"></div><div class="absolute w-8 h-[3px] bg-red-600 -rotate-45"></div></div>`;

            if (type === 'speed40') {
                htmlContent = `<div class="w-7 h-7 bg-white rounded-full border-[3px] border-red-600 shadow-md flex items-center justify-center font-black text-black text-[11px] leading-none tracking-tighter">40</div>`;
            } else if (type === 'speed20') {
                htmlContent = `<div class="w-7 h-7 bg-white rounded-full border-[3px] border-red-600 shadow-md flex items-center justify-center font-black text-black text-[11px] leading-none tracking-tighter">20</div>`;
            } else if (type === 'main_road') {
                htmlContent = `<div class="w-7 h-7 flex items-center justify-center drop-shadow-md"><div class="w-4 h-4 bg-yellow-400 border-[2px] border-white ring-1 ring-gray-400 transform rotate-45"></div></div>`;
            } else if (type === 'no_stop') {
                htmlContent = noStopHtml;
            } else if (type === 'stop') {
                // –í–µ–∫—Ç–æ—Ä–Ω—ã–π –∑–Ω–∞–∫ STOP
                htmlContent = `
                    <div class="flex items-center justify-center w-7 h-7 drop-shadow-md">
                        <svg viewBox="0 0 100 100" class="w-full h-full">
                            <polygon points="30,5 70,5 95,30 95,70 70,95 30,95 5,70 5,30" fill="#dc2626" stroke="white" stroke-width="4"/>
                            <text x="50" y="54" font-family="sans-serif" font-weight="900" font-size="28" fill="white" text-anchor="middle" dominant-baseline="middle" letter-spacing="-1">STOP</text>
                        </svg>
                    </div>`;
            } else if (type === 'yield') {
                // –í–µ–∫—Ç–æ—Ä–Ω—ã–π –∑–Ω–∞–∫ –£–°–¢–£–ü–ò –î–û–†–û–ì–£ (–ü–µ—Ä–µ–≤–µ—Ä–Ω—É—Ç—ã–π —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫)
                htmlContent = `
                    <div class="flex items-center justify-center w-7 h-7 drop-shadow-md">
                        <svg viewBox="0 0 100 100" class="w-full h-full">
                            <!-- –¢—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫ —Å –∑–∞–∫—Ä—É–≥–ª–µ–Ω–Ω—ã–º–∏ —É–≥–ª–∞–º–∏ -->
                            <polygon points="5,10 95,10 50,90" fill="white" stroke="#dc2626" stroke-width="14" stroke-linejoin="round"/>
                        </svg>
                    </div>`;
            }

            return L.divIcon({
                className: 'sign-icon',
                html: htmlContent,
                iconSize: iSize,
                iconAnchor: iAnchor
            });
        }

        // --- –ì–ï–ù–ï–†–ê–¶–ò–Ø –ö–ê–†–¢–û–ß–ï–ö –ò –°–ü–ò–°–ö–ê ---
        let menuHTML = '';

        if (videoPointsData.length > 0) {
            menuHTML += `<h3 class="font-bold text-gray-400 text-[10px] uppercase tracking-widest mb-2 mt-2">üé¨ –†–∞–∑–±–æ—Ä—ã –ø–µ—Ä–µ–∫—Ä–µ—Å—Ç–∫–æ–≤</h3><div class="flex flex-col gap-2 mb-4">`;
            videoPointsData.forEach((p, index) => {
                let author = p.authorName ? `<div class="mt-4 p-3 bg-gray-50 border border-gray-200 rounded-xl"><p class="text-[10px] font-bold text-gray-400 uppercase mb-1">–ê–≤—Ç–æ—Ä —Ä–∞–∑–±–æ—Ä–∞:</p><p class="text-sm font-bold text-gray-800">${p.authorName}</p><p class="text-xs text-blue-600 font-bold mt-0.5">${p.authorPrice}</p><a href="tel:${p.authorPhone}" class="mt-2 block w-full bg-emerald-500 text-white text-center py-2.5 rounded-lg text-xs font-bold uppercase shadow-md tracking-widest">üìû –ü–æ–∑–≤–æ–Ω–∏—Ç—å</a></div>` : "";
                let fullScreenBtn = p.vkCode ? `<button onclick="openFullscreen(${index}, 'videoPoints')" class="w-full bg-gray-900 text-white py-3.5 mt-2 rounded-xl text-xs font-black uppercase tracking-widest shadow-lg flex justify-center items-center gap-2 active:bg-gray-700">üé¶ –ù–∞ –≤–µ—Å—å —ç–∫—Ä–∞–Ω</button>` : "";

                const html = `<div class="flex flex-col"><span class="text-blue-600 text-[10px] font-black uppercase tracking-widest mb-1">–°–æ–≤–µ—Ç –∏–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–∞</span><h3 class="font-black text-gray-900 text-xl leading-tight mb-3">${p.title}</h3>${p.vkCode ? `<div class="video-container shadow-md">${p.vkCode}</div>` : ''}${fullScreenBtn}<p class="text-sm text-gray-700 font-medium leading-snug mt-4">${p.description}</p>${author}${p.telegramLink ? `<a href="${p.telegramLink}" target="_blank" class="w-full bg-[#2AABEE] text-white py-3 rounded-xl text-xs font-black shadow-lg text-center uppercase tracking-widest mt-3 block">–û–±—Å—É–¥–∏—Ç—å –≤ –≥—Ä—É–ø–ø–µ</a>` : ''}</div>`;
                const cacheId = 'video_' + index; sheetCache[cacheId] = html;

                L.marker([p.lat, p.lng], {icon: videoIcon}).addTo(videoMarkersGroup).bindTooltip(p.title, { direction: 'top', offset: [0, -10], className: 'custom-tooltip' }).on('click', () => { map.flyTo([p.lat, p.lng], 17); openSheet(html); });
                menuHTML += `<button onclick="flyToPoint(${p.lat}, ${p.lng}, '${cacheId}')" class="w-full text-left bg-white p-3 rounded-xl border border-gray-100 shadow-sm hover:border-blue-300 hover:shadow-md transition group"><div class="font-bold text-gray-800 text-sm group-hover:text-blue-600">${p.title}</div><div class="text-[10px] text-gray-400 mt-1 truncate">${p.description}</div></button>`;
            });
            menuHTML += `</div>`;
        }

        if (streetPointsData.length > 0) {
            menuHTML += `<h3 class="font-bold text-gray-400 text-[10px] uppercase tracking-widest mb-2 mt-2">üìç –†–∞–∑–±–æ—Ä—ã —É–ª–∏—Ü</h3><div class="flex flex-col gap-2 mb-4">`;
            streetPointsData.forEach((p, index) => {
                let fullScreenBtn = p.vkCode ? `<button onclick="openFullscreen(${index}, 'streetPoints')" class="w-full bg-gray-900 text-white py-3.5 mt-2 rounded-xl text-xs font-black uppercase tracking-widest shadow-lg flex justify-center items-center gap-2 active:bg-gray-700">üé¶ –ù–∞ –≤–µ—Å—å —ç–∫—Ä–∞–Ω</button>` : "";
                const html = `<div class="flex flex-col"><span class="text-emerald-600 text-[10px] font-black uppercase tracking-widest mb-1">–ü—Ä–æ–µ–∑–¥ —É—á–∞—Å—Ç–∫–∞</span><h3 class="font-black text-gray-900 text-xl leading-tight mb-3">${p.title}</h3>${p.vkCode ? `<div class="video-container shadow-md">${p.vkCode}</div>` : ''}${fullScreenBtn}<p class="text-sm text-gray-700 font-medium leading-snug mt-4">${p.description}</p></div>`;
                
                const cacheId = 'street_' + index; sheetCache[cacheId] = html;
                L.marker([p.lat, p.lng], {icon: streetIcon}).addTo(streetPointsGroup).bindTooltip(p.title, { direction: 'top', offset: [0, -10], className: 'custom-tooltip' }).on('click', () => { map.flyTo([p.lat, p.lng], 17); openSheet(html); });
                menuHTML += `<button onclick="flyToPoint(${p.lat}, ${p.lng}, '${cacheId}')" class="w-full text-left bg-white p-3 rounded-xl border border-gray-100 shadow-sm hover:border-emerald-300 hover:shadow-md transition group"><div class="font-bold text-gray-800 text-sm group-hover:text-emerald-600">${p.title}</div><div class="text-[10px] text-gray-400 mt-1 truncate">${p.description}</div></button>`;
            });
            menuHTML += `</div>`;
        }

        // –û–¢–†–ò–°–û–í–ö–ê –ó–ù–ê–ö–û–í
        if (signsData.length > 0) {
            menuHTML += `<h3 class="font-bold text-gray-400 text-[10px] uppercase tracking-widest mb-2 mt-2">üö¶ –î–æ—Ä–æ–∂–Ω—ã–µ –∑–Ω–∞–∫–∏</h3><div class="flex flex-col gap-2 mb-4">`;
            
            signsData.forEach((p, index) => {
                const html = `
                    <div class="flex flex-col">
                        <span class="text-red-600 text-[10px] font-black uppercase tracking-widest mb-1">–í–Ω–∏–º–∞–Ω–∏–µ –Ω–∞ –∑–Ω–∞–∫</span>
                        <h3 class="font-black text-gray-900 text-xl leading-tight mb-2">${p.title}</h3>
                        <p class="text-sm text-gray-700 font-medium leading-snug mt-2">${p.description}</p>
                    </div>`;
                
                const cacheId = 'sign_' + index;
                sheetCache[cacheId] = html;

                L.marker([p.lat, p.lng], {icon: getSignIcon(p.type)}).addTo(signsGroup)
                 .bindTooltip(p.title, { direction: 'top', offset: [0, -10], className: 'custom-tooltip' })
                 .on('click', () => { map.flyTo([p.lat, p.lng], 17); openSheet(html); });

                menuHTML += `<button onclick="flyToPoint(${p.lat}, ${p.lng}, '${cacheId}')" class="w-full text-left bg-white p-3 rounded-xl border border-gray-100 shadow-sm hover:border-red-300 hover:shadow-md transition group"><div class="font-bold text-gray-800 text-sm group-hover:text-red-600">${p.title}</div><div class="text-[10px] text-gray-400 mt-1 truncate">${p.description}</div></button>`;
            });
            menuHTML += `</div>`;
        }

        if (infoPointsData.length > 0) {
            infoPointsData.forEach((p, index) => {
                let mediaHtml = p.imageUrl ? `<img src="${p.imageUrl}" alt="–ò–Ω—Ñ–æ" class="w-full h-auto mt-2 rounded-lg shadow-sm border border-gray-100 object-cover">` : '';
                let linksHtml = p.fileUrl ? `<a href="${p.fileUrl}" target="_blank" class="w-full bg-indigo-50 text-indigo-700 text-center py-2.5 rounded-lg text-xs font-bold uppercase shadow-sm mt-2 block border border-indigo-200 hover:bg-indigo-100 transition">üìÑ –û—Ç–∫—Ä—ã—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç</a>` : '';
                if (p.phone) linksHtml += `<a href="tel:${p.phone}" class="w-full bg-emerald-50 text-emerald-700 text-center py-2.5 rounded-lg text-xs font-bold uppercase shadow-sm mt-2 block border border-emerald-200 hover:bg-emerald-100 transition">üìû –ü–æ–∑–≤–æ–Ω–∏—Ç—å</a>`;

                const html = `<div class="flex flex-col"><span class="text-purple-600 text-[10px] font-black uppercase tracking-widest mb-1">–°–ø—Ä–∞–≤–∫–∞</span><h3 class="font-black text-gray-900 text-xl leading-tight mb-2">${p.title}</h3>${mediaHtml}<p class="text-sm text-gray-700 font-medium leading-snug mt-3">${p.description}</p>${linksHtml}</div>`;
                const cacheId = 'info_' + index; sheetCache[cacheId] = html;

                L.marker([p.lat, p.lng], {icon: infoIcon}).addTo(infoPointsGroup).bindTooltip(p.title, { direction: 'top', offset: [0, -10], className: 'custom-tooltip' }).on('click', () => { map.flyTo([p.lat, p.lng], 17); openSheet(html); });
            });
        }

        if (routeLinesData.length > 0) {
            routeLinesData.forEach((r, index) => {
                const line = L.polyline(r.coordinates, { color: '#10B981', weight: 8 }).addTo(routeLinesGroup);
                let fullScreenBtn = r.vkCode ? `<button onclick="openFullscreen(${index}, 'routeLines')" class="w-full bg-gray-900 text-white py-3.5 mt-2 rounded-xl text-xs font-black uppercase tracking-widest shadow-lg flex justify-center items-center gap-2 active:bg-gray-700">üé¶ –ù–∞ –≤–µ—Å—å —ç–∫—Ä–∞–Ω</button>` : "";
                const html = `<div class="flex flex-col"><span class="text-emerald-600 text-[10px] font-black uppercase tracking-widest mb-1">–ü—Ä–æ–µ–∑–¥ —É—á–∞—Å—Ç–∫–∞</span><h3 class="font-black text-gray-900 text-xl leading-tight mb-3">${r.title}</h3>${r.vkCode ? `<div class="video-container shadow-md">${r.vkCode}</div>` : ''}${fullScreenBtn}<p class="text-sm text-gray-700 font-medium leading-snug mt-4">${r.description}</p></div>`;
                const cacheId = 'route_' + index; sheetCache[cacheId] = html;

                line.bindTooltip(r.title, { sticky: true, className: 'custom-tooltip' });
                line.on('click', (e) => { map.flyTo(e.latlng, 17); openSheet(html); });
            });
        }

        instructorsData.forEach((i, index) => {
            const html = `<div class="flex flex-col"><div class="flex gap-4 items-center mb-4"><img src="${i.photoUrl}" class="w-16 h-16 rounded-full border-2 border-orange-500 shadow-md object-cover"><div><h3 class="font-black text-gray-900 text-xl leading-tight">${i.name}</h3><p class="text-gray-500 text-xs font-medium mt-0.5">${i.car}</p><div class="text-yellow-400 text-xs mt-1 font-black uppercase">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê ${i.rating}</div></div></div><p class="text-sm text-gray-700 italic bg-gray-50 p-3 rounded-lg border border-gray-100 mb-4">"${i.description}"</p><div class="flex gap-2"><a href="tel:${i.phone}" class="flex-1 bg-emerald-500 text-white text-center py-3 rounded-xl text-xs font-black uppercase tracking-widest shadow-md">üìû –ó–≤–æ–Ω–æ–∫</a><a href="${i.telegramLink}" target="_blank" class="flex-1 bg-[#2AABEE] text-white text-center py-3 rounded-xl text-xs font-black uppercase tracking-widest shadow-md">üí¨ –ù–∞–ø–∏—Å–∞—Ç—å</a></div></div>`;
            L.marker([i.lat, i.lng], {icon: instructorIcon}).addTo(instructorsGroup).bindTooltip(i.name, { direction: 'top', offset: [0, -10], className: 'custom-tooltip' }).on('click', () => { map.flyTo([i.lat, i.lng], 17); openSheet(html); });
        });

        document.getElementById('menuContent').innerHTML = menuHTML;

    </script>
</body>
</html>
